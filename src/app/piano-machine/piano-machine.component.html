<div class="piano-machine">
  <!-- Piano grid container -->
  <div class="grid">
    <div class="row" *ngFor="let key of pianoKeys">
      <div class="steps">
        <button *ngFor="let _ of [].constructor(sequenceLength); let i = index"
                class="step"
                [class.active]="grid[key][i]"
                [class.current]="i === currentStep"
                (mousedown)="startDrag(key, i)"
                (mouseenter)="dragToggle(key, i)"
                (click)="toggleStep(key, i)">
        </button>
      </div>
    </div>
  </div>
  <!-- Canvas overlay for painting -->
  <canvas #pianoCanvas class="canvas-overlay"></canvas>
</div>
